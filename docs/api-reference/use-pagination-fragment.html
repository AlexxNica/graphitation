<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">usePaginationFragment | graphitation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://microsoft.github.io/graphitation/docs/api-reference/use-pagination-fragment"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="usePaginationFragment | graphitation"><meta data-react-helmet="true" name="description" content="API reference for usePaginationFragment, a React hook used to paginate a connection"><meta data-react-helmet="true" property="og:description" content="API reference for usePaginationFragment, a React hook used to paginate a connection"><meta data-react-helmet="true" name="keywords" content="pagination,connection"><link data-react-helmet="true" rel="icon" href="/graphitation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://microsoft.github.io/graphitation/docs/api-reference/use-pagination-fragment"><link data-react-helmet="true" rel="alternate" href="https://microsoft.github.io/graphitation/docs/api-reference/use-pagination-fragment" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://microsoft.github.io/graphitation/docs/api-reference/use-pagination-fragment" hreflang="x-default"><link rel="stylesheet" href="/graphitation/assets/css/styles.a3a90cdc.css">
<link rel="preload" href="/graphitation/assets/js/runtime~main.4da579b1.js" as="script">
<link rel="preload" href="/graphitation/assets/js/main.98594443.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/graphitation/"><div class="navbar__logo"><img src="/graphitation/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/graphitation/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">graphitation</b></a><a class="navbar__item navbar__link navbar__link--active" href="/graphitation/docs/apollo-react-relay-duct-tape/intro">Apollo React/Relay Duct-Tape</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/graphitation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/graphitation/docs/apollo-react-relay-duct-tape/intro">Apollo React/Relay Duct-Tape</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphitation/docs/apollo-react-relay-duct-tape/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphitation/docs/apollo-react-relay-duct-tape/use-lazy-load-query">useLazyLoadQuery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphitation/docs/api-reference/use-fragment">useFragment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphitation/docs/api-reference/use-refetchable-fragment">useRefetchableFragment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/graphitation/docs/api-reference/use-pagination-fragment">usePaginationFragment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphitation/docs/api-reference/use-mutation">useMutation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphitation/docs/api-reference/use-subscription">useSubscription</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>usePaginationFragment</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="usepaginationfragment"><code>usePaginationFragment</code><a class="hash-link" href="#usepaginationfragment" title="Direct link to heading">â€‹</a></h2><p>You can use <code>usePaginationFragment</code> to render a fragment that uses a <code>@connection</code> and paginate over it:</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> type </span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">FriendsListPaginationQuery</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;FriendsListPaginationQuery.graphql&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> type </span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">FriendsList_user$key</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;FriendsList_user.graphql&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;React&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">graphql</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> usePaginationFragment</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;react-relay&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">FriendsList_user$key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">FriendsList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loadNext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loadPrevious</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hasNext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hasPrevious</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isLoadingNext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isLoadingPrevious</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    refetch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// For refetching connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> usePaginationFragment</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">FriendsListPaginationQuery</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    graphql</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      fragment FriendsListComponent_user on User</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      @refetchable(queryName: &quot;FriendsListPaginationQuery&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        name</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        friends(first: $count, after: $cursor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        @connection(key: &quot;FriendsList_user_friends&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          edges {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">            node {</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">              name</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">              age</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Friends</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">List</span><span class="token plain"> items</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">friends</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">edges</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">edge</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> edge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token parameter">node</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">age</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">List</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Load</span><span class="token plain"> more friends</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">FriendsList</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="arguments">Arguments<a class="hash-link" href="#arguments" title="Direct link to heading">â€‹</a></h3><ul><li><code>fragment</code>: GraphQL fragment specified using a <code>graphql</code> template literal.<ul><li>This fragment must have an <code>@connection</code> directive on a connection field, otherwise using it will throw an error.</li><li>This fragment must have a <code>@refetchable</code> directive, otherwise using it will throw an error. The <code>@refetchable</code> directive can only be added to fragments that are &quot;refetchable&quot;, that is, on fragments that are declared on <code>Viewer</code> or <code>Query</code> types, or on a type that implements <code>Node</code> (i.e. a type that has an <code>id</code>).<ul><li>Note that you <em>do not</em> need to manually specify a pagination query yourself. The <code>@refetchable</code> directive will autogenerate a query with the specified <code>queryName</code>. This will also generate Flow types for the query, available to import from the generated file: <code>&lt;queryName&gt;.graphql.js</code>.</li></ul></li></ul></li><li><code>fragmentReference</code>: The <em>fragment reference</em> is an opaque Relay object that Relay uses to read the data for the fragment from the store; more specifically, it contains information about which particular object instance the data should be read from.<ul><li>The type of the fragment reference can be imported from the generated Flow types, from the file <code>&lt;fragment_name&gt;.graphql.js</code>, and can be used to declare the type of your <code>Props</code>. The name of the fragment reference type will be: <code>&lt;fragment_name&gt;$key</code>. We use our <a href="https://github.com/relayjs/eslint-plugin-relay" target="_blank" rel="noopener noreferrer">lint rule</a> to enforce that the type of the fragment reference prop is correctly declared.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="flow-type-parameters">Flow Type Parameters<a class="hash-link" href="#flow-type-parameters" title="Direct link to heading">â€‹</a></h3><ul><li><code>TQuery</code>: Type parameter that should corresponds the Flow type for the <code>@refetchable</code> pagination query. This type is available to import from the the auto-generated file: <code>&lt;queryName&gt;.graphql.js</code>.</li><li><code>TFragmentRef</code>: Type parameter corresponds to the type of the fragment reference argument (i.e. <code>&lt;fragment_name&gt;$key</code>). This type usually does not need to be explicitly specified, and can be passed as <code>_</code> to let Flow infer the concrete type.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="return-value">Return Value<a class="hash-link" href="#return-value" title="Direct link to heading">â€‹</a></h3><p>Object containing the following properties:</p><ul><li><code>data</code>: Object that contains data which has been read out from the Relay store; the object matches the shape of specified fragment.<ul><li>The Flow type for data will also match this shape, and contain types derived from the GraphQL Schema.</li></ul></li><li><code>isLoadingNext</code>: Boolean value which indicates if a pagination request for the <em>next</em> items in the connection is currently in flight, including any incremental data payloads.</li><li><code>isLoadingPrevious</code>: Boolean value which indicates if a pagination request for the <em>previous</em> items in the connection is currently in flight, including any incremental data payloads.</li><li><code>hasNext</code>: Boolean value which indicates if the end of the connection has been reached in the &quot;forward&quot; direction. It will be true if there are more items to query for available in that direction, or false otherwise.</li><li><code>hasPrevious</code>: Boolean value which indicates if the end of the connection has been reached in the &quot;backward&quot; direction. It will be true if there are more items to query for available in that direction, or false otherwise.</li><li><code>loadNext</code>: Function used to fetch more items in the connection in the &quot;forward&quot; direction.<ul><li>Arguments:<ul><li><code>count</code><em>:</em> Number that indicates how many items to query for in the pagination request.</li><li><code>options</code>: <em><em>[Optional]</em></em> options object<ul><li><code>onComplete</code>: Function that will be called whenever the refetch request has completed, including any incremental data payloads. If an error occurs during the request, <code>onComplete</code> will be called with an <code>Error</code> object as the first parameter.</li></ul></li></ul></li><li>Return Value:<ul><li><code>disposable</code>: Object containing a <code>dispose</code> function. Calling <code>disposable.dispose()</code> will cancel the pagination request.</li></ul></li><li>Behavior:<ul><li>Calling <code>loadNext</code> <em>will not</em> cause the component to suspend. Instead, the <code>isLoadingNext</code> value will be set to true while the request is in flight, and the new items from the pagination request will be added to the connection, causing the component to re-render.</li><li>Pagination requests initiated from calling <code>loadNext</code> will <em>always</em> use the same variables that were originally used to fetch the connection, <em>except</em> pagination variables (which need to change in order to perform pagination); changing variables other than the pagination variables during pagination doesn&#x27;t make sense, since that&#x27;d mean we&#x27;d be querying for a different connection.</li></ul></li></ul></li><li><code>loadPrevious</code>: Function used to fetch more items in the connection in the &quot;backward&quot; direction.<ul><li>Arguments:<ul><li><code>count</code><em>:</em> Number that indicates how many items to query for in the pagination request.</li><li><code>options</code>: <em><em>[Optional]</em></em> options object<ul><li><code>onComplete</code>: Function that will be called whenever the refetch request has completed, including any incremental data payloads. If an error occurs during the request, <code>onComplete</code> will be called with an <code>Error</code> object as the first parameter.</li></ul></li></ul></li><li>Return Value:<ul><li><code>disposable</code>: Object containing a <code>dispose</code> function. Calling <code>disposable.dispose()</code> will cancel the pagination request.</li></ul></li><li>Behavior:<ul><li>Calling <code>loadPrevious</code> <em>will not</em> cause the component to suspend. Instead, the <code>isLoadingPrevious</code> value will be set to true while the request is in flight, and the new items from the pagination request will be added to the connection, causing the component to re-render.</li><li>Pagination requests initiated from calling <code>loadPrevious</code> will <em>always</em> use the same variables that were originally used to fetch the connection, <em>except</em> pagination variables (which need to change in order to perform pagination); changing variables other than the pagination variables during pagination doesn&#x27;t make sense, since that&#x27;d mean we&#x27;d be querying for a different connection.</li></ul></li></ul></li><li><code>refetch</code>: Function used to refetch the connection fragment with a potentially new set of variables.<ul><li>Arguments:<ul><li><code>variables</code>: Object containing the new set of variable values to be used to fetch the <code>@refetchable</code> query.<ul><li>These variables need to match GraphQL variables referenced inside the fragment.</li><li>However, only the variables that are intended to change for the refetch request need to be specified; any variables referenced by the fragment that are omitted from this input will fall back to using the value specified in the original parent query. So for example, to refetch the fragment with the exact same variables as it was originally fetched, you can call <code>refetch({})</code>.</li><li>Similarly, passing an <code>id</code> value for the <code>$id</code> variable is <em><em>optional</em></em>, unless the fragment wants to be refetched with a different <code>id</code>. When refetching a <code>@refetchable</code> fragment, Relay will already know the id of the rendered object.</li></ul></li><li><code>options</code>: <em><em>[Optional]</em></em> options object<ul><li><code>fetchPolicy</code>: Determines if cached data should be used, and when to send a network request based on cached data that is available. See the <a href="/graphitation/guided-tour/reusing-cached-data/fetch-policies">Fetch Policies</a> section for full specification.</li><li><code>onComplete</code>: Function that will be called whenever the refetch request has completed, including any incremental data payloads.</li></ul></li></ul></li><li>Return value:<ul><li><code>disposable</code>: Object containing a <code>dispose</code> function. Calling <code>disposable.dispose()</code> will cancel the refetch request.</li></ul></li><li>Behavior:<ul><li>Calling <code>refetch</code> with a new set of variables will fetch the fragment again <em>with the newly provided variables</em>. Note that the variables you need to provide are only the ones referenced inside the fragment. In this example, it means fetching the translated body of the currently rendered Comment, by passing a new value to the <code>lang</code> variable.</li><li>Calling <code>refetch</code> will re-render your component and may cause it to <em><a href="/graphitation/guided-tour/rendering/loading-states">suspend</a></em>, depending on the specified <code>fetchPolicy</code> and whether cached data is available or if it needs to send and wait for a network request. If refetch causes the component to suspend, you&#x27;ll need to make sure that there&#x27;s a <code>Suspense</code> boundary wrapping this component.</li><li>For more details on Suspense, see our <a href="/graphitation/guided-tour/rendering/loading-states">Loading States with Suspense</a> guide.</li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="behavior">Behavior<a class="hash-link" href="#behavior" title="Direct link to heading">â€‹</a></h3><ul><li>The component is automatically subscribed to updates to the fragment data: if the data for this particular <code>User</code> is updated anywhere in the app (e.g. via fetching new data, or mutating existing data), the component will automatically re-render with the latest updated data.</li><li>The component will suspend if any data for that specific fragment is missing, and the data is currently being fetched by a parent query.<ul><li>For more details on Suspense, see our <a href="/graphitation/guided-tour/rendering/loading-states">Loading States with Suspense</a> guide.</li></ul></li><li>Note that pagination (<code>loadNext</code> or <code>loadPrevious</code>), <em>will not</em> cause the component to suspend.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="differences-with-paginationcontainer">Differences with <code>PaginationContainer</code><a class="hash-link" href="#differences-with-paginationcontainer" title="Direct link to heading">â€‹</a></h3><ul><li>A pagination query no longer needs to be specified in this api, since it will be automatically generated by Relay by using a <code>@refetchable</code> fragment.</li><li>This api supports simultaneous bi-directional pagination out of the box.</li><li>This api no longer requires passing a <code>getVariables</code> or <code>getFragmentVariables</code> configuration functions, like the <code>PaginationContainer</code> does.<ul><li>This implies that pagination no longer has a between <code>variables</code> and <code>fragmentVariables</code>, which were previously vaguely defined concepts. Pagination requests will always use the same variables that were originally used to fetch the connection, <em>except</em> pagination variables (which need to change in order to perform pagination); changing variables other than the pagination variables during pagination doesn&#x27;t make sense, since that&#x27;d mean we&#x27;d be querying for a different connection.</li></ul></li><li>This api no longer takes additional configuration like <code>direction</code> or <code>getConnectionFromProps</code> function (like Pagination Container does). These values will be automatically determined by Relay.</li><li>Refetching no longer has a distinction between <code>variables</code> and <code>fragmentVariables</code>, which were previously vaguely defined concepts. Refetching will always correctly refetch and render the fragment with the variables you provide (any variables omitted in the input will fallback to using the original values in the parent query).</li><li>Refetching will unequivocally update the component, which was not always true when calling <code>refetchConnection</code> from <code>PaginationContainer</code> (it would depend on what you were querying for in the refetch query and if your fragment was defined on the right object type).</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/microsoft/graphitation/tree/main/website/docs/apollo-react-relay-duct-tape/use-pagination-fragment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/graphitation/docs/api-reference/use-refetchable-fragment"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">useRefetchableFragment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/graphitation/docs/api-reference/use-mutation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">useMutation</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#usepaginationfragment" class="table-of-contents__link toc-highlight"><code>usePaginationFragment</code></a><ul><li><a href="#arguments" class="table-of-contents__link toc-highlight">Arguments</a></li><li><a href="#flow-type-parameters" class="table-of-contents__link toc-highlight">Flow Type Parameters</a></li><li><a href="#return-value" class="table-of-contents__link toc-highlight">Return Value</a></li><li><a href="#behavior" class="table-of-contents__link toc-highlight">Behavior</a></li><li><a href="#differences-with-paginationcontainer" class="table-of-contents__link toc-highlight">Differences with <code>PaginationContainer</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/graphitation/docs/apollo-react-relay-duct-tape/intro">Apollo React/Relay Duct-Tape</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://teams.microsoft.com/l/channel/19%3a487e60012b034c9e91db26c1fc0906d1%40thread.tacv2/GraphQL%2520(IDataClient)?groupId=505d3b35-052e-4bb7-a1f4-d1cdaec5f6a7&amp;tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Teams<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Microsoft Corporation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/graphitation/assets/js/runtime~main.4da579b1.js"></script>
<script src="/graphitation/assets/js/main.98594443.js"></script>
</body>
</html>